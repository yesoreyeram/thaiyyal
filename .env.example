# Thaiyyal Configuration Example
# Copy this file to .env.local for local development

# =============================================================================
# Application Settings
# =============================================================================

# Node environment (development, production, test)
NODE_ENV=development

# =============================================================================
# Security Settings
# =============================================================================

# HTTP Node Configuration
# -----------------------

# Timeout for HTTP requests (in seconds)
# Default: 30 seconds
HTTP_TIMEOUT=30

# Maximum HTTP response size (in MB)
# Default: 10MB
# Prevents memory exhaustion from large responses
MAX_RESPONSE_SIZE=10

# Maximum number of HTTP redirects to follow
# Default: 10
MAX_HTTP_REDIRECTS=10

# Block requests to internal/private IP addresses (SSRF protection)
# Default: true (recommended for production)
# Set to false only for local development/testing
BLOCK_INTERNAL_IPS=true

# Allowed URL patterns (comma-separated list)
# If empty, all external URLs are allowed (when BLOCK_INTERNAL_IPS=true)
# Example: example.com,api.trusted.com,*.safe-domain.com
# Default: empty (allow all external URLs)
ALLOWED_URL_PATTERNS=

# =============================================================================
# Workflow Execution Limits
# =============================================================================

# Maximum workflow execution time (in seconds)
# Default: 300 (5 minutes)
MAX_EXECUTION_TIME=300

# Maximum single node execution time (in seconds)
# Default: 30 seconds
MAX_NODE_EXECUTION_TIME=30

# Maximum iterations for loops (ForEach, WhileLoop)
# Default: 1000
MAX_ITERATIONS=1000

# =============================================================================
# Resource Limits
# =============================================================================

# Maximum number of nodes in a workflow
# Default: 1000
MAX_NODES=1000

# Maximum number of edges in a workflow
# Default: 10000
MAX_EDGES=10000

# Maximum workflow payload size (in MB)
# Default: 1MB
MAX_PAYLOAD_SIZE=1

# =============================================================================
# Cache Settings
# =============================================================================

# Default cache TTL (in seconds)
# Default: 3600 (1 hour)
DEFAULT_CACHE_TTL=3600

# Maximum number of cache entries
# Default: 1000
MAX_CACHE_SIZE=1000

# =============================================================================
# Development Settings
# =============================================================================

# Enable verbose logging
# Default: false
DEBUG=false

# Enable workflow execution tracing
# Default: false
TRACE_EXECUTION=false

# =============================================================================
# Notes
# =============================================================================

# Security Best Practices:
# 1. Always set BLOCK_INTERNAL_IPS=true in production
# 2. Use ALLOWED_URL_PATTERNS to whitelist trusted domains
# 3. Keep HTTP_TIMEOUT low to prevent DoS
# 4. Set appropriate MAX_RESPONSE_SIZE based on your use case
# 5. Review and adjust resource limits for your deployment

# For multi-tenant deployments:
# - Set stricter limits (lower MAX_NODES, MAX_EXECUTION_TIME)
# - Enable ALLOWED_URL_PATTERNS whitelist
# - Consider per-tenant quotas (future feature)

# For local development:
# - You can set BLOCK_INTERNAL_IPS=false to test with local servers
# - Increase timeouts for debugging
# - Enable DEBUG and TRACE_EXECUTION for troubleshooting
